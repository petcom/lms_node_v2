# UI Team Message: Question Entity Modification Request

**Date:** 2026-01-21
**From:** UI Team
**To:** API Team
**Priority:** P1 (High)
**Status:** PENDING
**Related:** UI-2026-01-21-assessment-module-spec.md

---

## Summary

Add `questionBankIds: string[]` field to the existing **Question** entity to support the new Assessment module's question bank selection feature.

---

## Background

The Assessment module allows quizzes and exams to pull questions from one or more question banks at runtime. Rather than creating a separate QuestionBank entity, we're implementing this via an array field on the Question entity.

---

## Required Change

Add the following field to the Question entity:

```typescript
interface Question {
  // ... existing fields ...

  questionBankIds: string[];  // NEW: Array of bank IDs this question belongs to
}
```

---

## Design Rationale

This design supports a **many-to-many relationship** between Questions and Question Banks:

| Relationship | How It Works |
|--------------|--------------|
| One Question → Multiple Banks | A question can have multiple bank IDs in its `questionBankIds` array |
| One Bank → Multiple Questions | Multiple questions can reference the same bank ID |
| One Bank → Multiple Assessments | Multiple assessments can reference the same bank ID |
| One Assessment → Multiple Banks | Assessment's `questionBankIds` array can contain multiple bank IDs |

**Example:**
```typescript
// Question belongs to multiple banks
{ id: "q1", questionText: "...", questionBankIds: ["bank-safety", "bank-module1"] }

// Assessment pulls from multiple banks
{ id: "a1", title: "Unit 1 Quiz", questionBankIds: ["bank-safety", "bank-module1"] }
```

---

## API Changes Required

### 1. Question Model Update

```typescript
// Add to Question schema
questionBankIds: {
  type: [String],
  default: [],
  index: true  // For efficient querying
}
```

### 2. Create Question Endpoint

`POST /questions` should accept `questionBankIds`:

```typescript
interface CreateQuestionPayload {
  // ... existing fields ...
  questionBankIds?: string[];  // Optional, defaults to []
}
```

### 3. Update Question Endpoint

`PUT /questions/:id` should accept `questionBankIds`:

```typescript
interface UpdateQuestionPayload {
  // ... existing fields ...
  questionBankIds?: string[];
}
```

### 4. List Questions Filter

`GET /questions` should support filtering by bank:

```
GET /questions?bankId=bank-safety
```

Query logic:
```typescript
// Returns questions where questionBankIds contains the specified bankId
db.questions.find({ questionBankIds: { $in: [bankId] } })
```

### 5. Migration

For existing questions, set `questionBankIds: []` (empty array = department-wide pool, not assigned to any specific bank).

---

## Questions for API Team

1. Should we add a `GET /question-banks` endpoint to list all unique bank IDs in use? Or should the UI derive this from question data?

2. Should bank IDs be validated against any schema, or are they free-form strings?

3. Is there a need for a dedicated QuestionBank collection in the future for bank metadata (name, description, department)?

---

## Response Requested

Please confirm:
1. Field can be added to Question model
2. API endpoints can be updated as described
3. Migration approach is acceptable
4. Timeline estimate for implementation

---

*This message was generated by the UI development team*
